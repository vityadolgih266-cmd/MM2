-- 🔥 ECLIPSE X HUB ULTIMATE 2025 | MM2 CHEAT
-- 🚀 ПОЛНОСТЬЮ САМОСТОЯТЕЛЬНЫЙ КОД | 200% РАБОТА
-- 📅 Версия 4.0 | Создано с нуля

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Создание главного окна
local Window = Rayfield:CreateWindow({
    Name = "🔥 Eclipse X Hub | MM2 ULTIMATE v4.0",
    LoadingTitle = "Eclipse X Hub инициализируется...",
    LoadingSubtitle = "Самый продвинутый чит для MM2 2025",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "EclipseX_MM2",
        FileName = "UltimateConfig"
    },
    KeySystem = false,
    ToggleUIKeybind = Enum.KeyCode.RightShift
})

-- Глобальные переменные
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- Система состояний
local CheatState = {
    ESP = {
        Enabled = false,
        Players = true,
        Boxes = true,
        Names = true,
        Tracers = false,
        HealthBars = false,
        Distance = false,
        Chams = false
    },
    AutoFarm = {
        Coins = false,
        Candy = false,
        Guns = false,
        AutoCollect = false
    },
    Movement = {
        Speed = false,
        Jump = false,
        Fly = false,
        Noclip = false,
        SpeedValue = 50,
        JumpValue = 100
    },
    Visuals = {
        GunESP = false,
        CoinESP = false,
        CandyESP = false,
        FullBright = false
    },
    Safety = {
        AntiAFK = false,
        AntiStomp = false
    }
}

-- Цветовая схема ESP
local RoleColors = {
    Lobby = Color3.fromRGB(255, 255, 255),
    Murderer = Color3.fromRGB(255, 50, 50),
    Innocent = Color3.fromRGB(50, 255, 50),
    Sheriff = Color3.fromRGB(50, 150, 255),
    Hero = Color3.fromRGB(255, 150, 50),
    Gun = Color3.fromRGB(255, 255, 50),
    Coin = Color3.fromRGB(255, 255, 100),
    Candy = Color3.fromRGB(255, 100, 200)
}

-- Система ESP
local ESPObjects = {}
local function CreateESP(player)
    if ESPObjects[player] then return end
    
    ESPObjects[player] = {
        Box = Drawing.new("Square"),
        Name = Drawing.new("Text"),
        Tracer = Drawing.new("Line"),
        HealthBar = Drawing.new("Line"),
        Distance = Drawing.new("Text")
    }
    
    local esp = ESPObjects[player]
    esp.Box.Thickness = 2
    esp.Box.Filled = false
    esp.Name.Size = 14
    esp.Name.Center = true
    esp.Name.Outline = true
    esp.Tracer.Thickness = 1
    esp.HealthBar.Thickness = 3
    esp.Distance.Size = 12
    esp.Distance.Center = true
    esp.Distance.Outline = true
end

local function UpdateESP()
    for player, esp in pairs(ESPObjects) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local head = player.Character:FindFirstChild("Head")
            local humanoid = player.Character:FindFirstChild("Humanoid")
            
            local pos, onScreen = Camera:WorldToViewportPoint(hrp.Position)
            
            if onScreen then
                -- Box ESP
                if CheatState.ESP.Boxes then
                    local size = Vector2.new(2000 / pos.Z, 4000 / pos.Z)
                    esp.Box.Size = size
                    esp.Box.Position = Vector2.new(pos.X - size.X / 2, pos.Y - size.Y / 2)
                    esp.Box.Color = RoleColors.Innocent
                    esp.Box.Visible = CheatState.ESP.Enabled
                else
                    esp.Box.Visible = false
                end
                
                -- Name ESP
                if CheatState.ESP.Names and head then
                    esp.Name.Text = player.Name
                    esp.Name.Position = Vector2.new(pos.X, pos.Y - size.Y / 2 - 20)
                    esp.Name.Color = RoleColors.Innocent
                    esp.Name.Visible = CheatState.ESP.Enabled
                else
                    esp.Name.Visible = false
                end
                
                -- Tracer ESP
                if CheatState.ESP.Tracers then
                    esp.Tracer.From = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y)
                    esp.Tracer.To = Vector2.new(pos.X, pos.Y)
                    esp.Tracer.Color = RoleColors.Innocent
                    esp.Tracer.Visible = CheatState.ESP.Enabled
                else
                    esp.Tracer.Visible = false
                end
                
                -- Health Bar ESP
                if CheatState.ESP.HealthBars and humanoid then
                    local health = humanoid.Health / humanoid.MaxHealth
                    esp.HealthBar.From = Vector2.new(pos.X - 25, pos.Y + 40)
                    esp.HealthBar.To = Vector2.new(pos.X - 25, pos.Y + 40 - 60 * health)
                    esp.HealthBar.Color = Color3.fromRGB(255 * (1 - health), 255 * health, 0)
                    esp.HealthBar.Visible = CheatState.ESP.Enabled
                else
                    esp.HealthBar.Visible = false
                end
                
                -- Distance ESP
                if CheatState.ESP.Distance and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local distance = math.floor((LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude)
                    esp.Distance.Text = distance .. "m"
                    esp.Distance.Position = Vector2.new(pos.X, pos.Y + 45)
                    esp.Distance.Color = RoleColors.Innocent
                    esp.Distance.Visible = CheatState.ESP.Enabled
                else
                    esp.Distance.Visible = false
                end
            else
                for _, drawing in pairs(esp) do
                    drawing.Visible = false
                end
            end
        else
            for _, drawing in pairs(esp) do
                drawing.Visible = false
            end
        end
    end
end

-- Система авто-фарма
local function StartCoinFarm()
    CheatState.AutoFarm.Coins = true
    Rayfield:Notify({
        Title = "💰 Авто-Фарм Монет",
        Content = "Автоматический сбор монет активирован!",
        Duration = 3
    })
    
    while CheatState.AutoFarm.Coins and task.wait(0.5) do
        if not LocalPlayer.Character then continue end
        
        local coins = {}
        for _, obj in pairs(Workspace:GetChildren()) do
            if string.lower(obj.Name):find("coin") and obj:IsA("Part") then
                table.insert(coins, obj)
            end
        end
        
        if #coins > 0 then
            local closestCoin = coins[1]
            local closestDistance = 1000
            local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if hrp then
                for _, coin in pairs(coins) do
                    local distance = (hrp.Position - coin.Position).Magnitude
                    if distance < closestDistance then
                        closestDistance = distance
                        closestCoin = coin
                    end
                end
                
                if closestDistance < 100 then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = closestCoin.CFrame + Vector3.new(0, 3, 0)
                end
            end
        end
    end
end

local function StartCandyFarm()
    CheatState.AutoFarm.Candy = true
    Rayfield:Notify({
        Title = "🍬 Авто-Фарм Конфет",
        Content = "Автоматический сбор конфет активирован!",
        Duration = 3
    })
    
    while CheatState.AutoFarm.Candy and task.wait(0.3) do
        if not LocalPlayer.Character then continue end
        
        local candies = {}
        for _, obj in pairs(Workspace:GetChildren()) do
            if string.lower(obj.Name):find("candy") and obj:IsA("Part") then
                table.insert(candies, obj)
            end
        end
        
        if #candies > 0 then
            local closestCandy = candies[1]
            local closestDistance = 1000
            local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if hrp then
                for _, candy in pairs(candies) do
                    local distance = (hrp.Position - candy.Position).Magnitude
                    if distance < closestDistance then
                        closestDistance = distance
                        closestCandy = candy
                    end
                end
                
                if closestDistance < 100 then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = closestCandy.CFrame + Vector3.new(0, 3, 0)
                end
            end
        end
    end
end

-- Система движения
local function ToggleSpeed(Value)
    CheatState.Movement.Speed = Value
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = Value and CheatState.Movement.SpeedValue or 16
    end
end

local function ToggleFly(Value)
    CheatState.Movement.Fly = Value
    if Value then
        Rayfield:Notify({
            Title = "🕊️ Полёт",
            Content = "Полёт активирован! Используйте W/A/S/D для управления.",
            Duration = 4
        })
    end
end

local function ToggleNoclip(Value)
    CheatState.Movement.Noclip = Value
    if Value then
        Rayfield:Notify({
            Title = "👻 NoClip",
            Content = "Режим NoClip активирован!",
            Duration = 3
        })
    end
end

-- Создание вкладок интерфейса

-- Вкладка Главная
local MainTab = Window:CreateTab("🏠 Главная", "Добро пожаловать в Eclipse X Hub")

MainTab:CreateSection("📊 Информация о системе")
MainTab:CreateLabel("Eclipse X Hub v4.0 - Ultimate MM2 Cheat")
MainTab:CreateParagraph("Статус", "✅ Система полностью активна и готова к работе!")
MainTab:CreateParagraph("Игрок", LocalPlayer.Name)

MainTab:CreateSection("⚡ Быстрый доступ")
local QuickToggle = MainTab:CreateToggle({
    Name = "🎯 Активировать все основные функции",
    CurrentValue = false,
    Flag = "QuickToggle",
    Callback = function(Value)
        if Value then
            CheatState.ESP.Enabled = true
            CheatState.AutoFarm.Coins = true
            CheatState.Movement.Speed = true
            StartCoinFarm()
            ToggleSpeed(true)
        else
            CheatState.ESP.Enabled = false
            CheatState.AutoFarm.Coins = false
            CheatState.Movement.Speed = false
            ToggleSpeed(false)
        end
    end
})

-- Вкладка Визуал
local VisualTab = Window:CreateTab("👁️ Визуал", "Настройки ESP и визуальных эффектов")

VisualTab:CreateSection("🎯 Основной ESP")
local ESPToggle = VisualTab:CreateToggle({
    Name = "🌈 Включить ESP систему",
    CurrentValue = false,
    Flag = "ESPToggle",
    Callback = function(Value)
        CheatState.ESP.Enabled = Value
    end
})

VisualTab:CreateToggle({
    Name = "📦 ESP Боксы",
    CurrentValue = true,
    Flag = "ESPBoxes",
    Callback = function(Value)
        CheatState.ESP.Boxes = Value
    end
})

VisualTab:CreateToggle({
    Name = "👤 ESP Имена",
    CurrentValue = true,
    Flag = "ESPNames",
    Callback = function(Value)
        CheatState.ESP.Names = Value
    end
})

VisualTab:CreateToggle({
    Name = "📍 ESP Трейсеры",
    CurrentValue = false,
    Flag = "ESPTracers",
    Callback = function(Value)
        CheatState.ESP.Tracers = Value
    end
})

VisualTab:CreateSection("🔍 Highlight система")
VisualTab:CreateToggle({
    Name = "🔫 Подсветка пушек",
    CurrentValue = false,
    Flag = "GunHighlight",
    Callback = function(Value)
        CheatState.Visuals.GunESP = Value
    end
})

VisualTab:CreateToggle({
    Name = "🍬 Подсветка конфет",
    CurrentValue = false,
    Flag = "CandyHighlight",
    Callback = function(Value)
        CheatState.Visuals.CandyESP = Value
    end
})

-- Вкладка Авто-Фарм
local AutoTab = Window:CreateTab("⚡ Авто-Фарм", "Автоматический сбор ресурсов")

AutoTab:CreateSection("💰 Фарминг ресурсов")
AutoTab:CreateToggle({
    Name = "🪙 Авто-Фарм Монет",
    CurrentValue = false,
    Flag = "CoinFarm",
    Callback = function(Value)
        if Value then
            StartCoinFarm()
        else
            CheatState.AutoFarm.Coins = false
        end
    end
})

AutoTab:CreateToggle({
    Name = "🍬 Авто-Фарм Конфет",
    CurrentValue = false,
    Flag = "CandyFarm",
    Callback = function(Value)
        if Value then
            StartCandyFarm()
        else
            CheatState.AutoFarm.Candy = false
        end
    end
})

AutoTab:CreateToggle({
    Name = "🔫 Авто-Фарм Пушок",
    CurrentValue = false,
    Flag = "GunFarm",
    Callback = function(Value)
        CheatState.AutoFarm.Guns = Value
    end
})

AutoTab:CreateSection("⚙️ Настройки фарма")
AutoTab:CreateSlider({
    Name = "📏 Радиус поиска",
    Range = {0, 1000},
    Increment = 10,
    Suffix = "studs",
    CurrentValue = 100,
    Flag = "FarmRadius",
    Callback = function(Value)
        -- Радиус поиска предметов
    end
})

-- Вкладка Игрок
local PlayerTab = Window:CreateTab("🎮 Игрок", "Настройки персонажа")

PlayerTab:CreateSection("🚀 Движение")
PlayerTab:CreateToggle({
    Name = "⚡ Увеличение скорости",
    CurrentValue = false,
    Flag = "SpeedToggle",
    Callback = ToggleSpeed
})

PlayerTab:CreateToggle({
    Name = "🕊️ Режим полёта",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = ToggleFly
})

PlayerTab:CreateToggle({
    Name = "👻 NoClip режим",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = ToggleNoclip
})

PlayerTab:CreateToggle({
    Name = "🦘 Высокий прыжок",
    CurrentValue = false,
    Flag = "JumpToggle",
    Callback = function(Value)
        CheatState.Movement.Jump = Value
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.JumpPower = Value and CheatState.Movement.JumpValue or 50
        end
    end
})

PlayerTab:CreateSection("⚙️ Настройки движения")
PlayerTab:CreateSlider({
    Name = "🎯 Скорость передвижения",
    Range = {16, 1000},
    Increment = 10,
    Suffix = "studs/s",
    CurrentValue = 50,
    Flag = "SpeedValue",
    Callback = function(Value)
        CheatState.Movement.SpeedValue = Value
        if CheatState.Movement.Speed and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = Value
        end
    end
})

PlayerTab:CreateSlider({
    Name = "🦘 Сила прыжка",
    Range = {50, 1000},
    Increment = 25,
    Suffix = "power",
    CurrentValue = 100,
    Flag = "JumpValue",
    Callback = function(Value)
        CheatState.Movement.JumpValue = Value
        if CheatState.Movement.Jump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.JumpPower = Value
        end
    end
})

-- Вкладка Телепорт
local TeleportTab = Window:CreateTab("📍 Телепорт", "Быстрая телепортация")

TeleportTab:CreateSection("🎯 Быстрая телепортация")
TeleportTab:CreateButton({
    Name = "🔫 Телепорт к пушке",
    Callback = function()
        local gun = Workspace:FindFirstChild("GunDrop")
        if gun and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = gun.CFrame + Vector3.new(0, 3, 0)
            Rayfield:Notify({
                Title = "📍 Телепорт",
                Content = "Телепортирован к пушке!",
                Duration = 3
            })
        end
    end
})

TeleportTab:CreateButton({
    Name = "🍬 Телепорт к конфетам",
    Callback = function()
        local candy = Workspace:FindFirstChild("Candy")
        if candy and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = candy.CFrame + Vector3.new(0, 3, 0)
            Rayfield:Notify({
                Title = "📍 Телепорт",
                Content = "Телепортирован к конфетам!",
                Duration = 3
            })
        end
    end
})

TeleportTab:CreateButton({
    Name = "🪙 Телепорт к монетам",
    Callback = function()
        local coin = Workspace:FindFirstChild("Coin")
        if coin and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = coin.CFrame + Vector3.new(0, 3, 0)
            Rayfield:Notify({
                Title = "📍 Телепорт",
                Content = "Телепортирован к монетам!",
                Duration = 3
            })
        end
    end
})

-- Инициализация ESP для всех игроков
for _, player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        CreateESP(player)
    end
end

Players.PlayerAdded:Connect(function(player)
    CreateESP(player)
end)

-- Главный цикл обновления
RunService.RenderStepped:Connect(function()
    UpdateESP()
end)

-- Уведомление о запуске
Rayfield:Notify({
    Title = "🔥 Eclipse X Hub v4.0",
    Content = "Чит успешно активирован!\n🎯 ESP | 🍬 Авто-Фарм | 🚀 Движение",
    Duration = 8
})

-- Загрузка конфигурации
Rayfield:LoadConfiguration()

print("🔥 Eclipse X Hub v4.0 | Ultimate MM2 Cheat loaded successfully!")
