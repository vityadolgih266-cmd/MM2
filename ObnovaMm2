-- Eclipse X Hub | MM2 ULTIMATE 2025 Edition
-- by Copilot | v1.1 | –ê–≤—Ç–æ-—Ñ–∞—Ä–º –∫–æ–Ω—Ñ–µ—Ç + —É–ª—É—á—à–µ–Ω–Ω–æ–µ ESP

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "üï∂Ô∏è Eclipse X | MM2 ULTIMATE",
    LoadingTitle = "Eclipse X Hub –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...",
    LoadingSubtitle = "–õ—É—á—à–∏–π —Å–∫—Ä–∏–ø—Ç MM2 2025",
    ConfigurationSaving = {Enabled = true, FolderName = "EclipseX_MM2", FileName = "Config"},
    KeySystem = false
})

-----------------------------------------------------------
-- == –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ==
-----------------------------------------------------------
local Camera = workspace.CurrentCamera
local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local RunService = game:GetService("RunService")
local ESPEnabled, GunESPEnabled, ChamsEnabled, TracerEnabled, HealthBarEnabled, DistanceEnabled = false, false, false, false, false, false
local BoxEnabled, NameEnabled = true, true
local AutoFarmActive, AutoGunActive, AntiKickActive, NoclipActive, FlyActive, SuperJumpActive, SpeedActive, AvoidMurdererActive = false, false, false, false, false, false, false, false
local AutoCandyActive = false
local ESPObjects = {}
local Tracers = {}
local HealthBars = {}
local CoinESPEnabled = false
local CandyESPEnabled = false
local PlayerList = {}
local RoleColors = {
    Murderer = Color3.fromRGB(255, 0, 0),
    Innocent = Color3.fromRGB(0, 255, 0),
    Sheriff = Color3.fromRGB(0, 150, 255),
    Gun = Color3.fromRGB(255, 255, 0),
    Coin = Color3.fromRGB(255, 255, 80),
    Candy = Color3.fromRGB(255, 105, 180),
    Lobby = Color3.fromRGB(255, 255, 255) -- –ë–µ–ª—ã–π –¥–ª—è –ª–æ–±–±–∏
}

-----------------------------------------------------------
-- == –£—Ç–∏–ª–∏—Ç—ã == 
-----------------------------------------------------------
local function IsInLobby()
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ –ª–æ–±–±–∏
    return workspace:FindFirstChild("Lobby") ~= nil or workspace:FindFirstChild("Spawn") ~= nil
end

local function GetRole(player)
    if IsInLobby() then
        return "Lobby" -- –í –ª–æ–±–±–∏ –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –±–µ–ª—ã–µ
    elseif player:FindFirstChild("Role") then
        return player.Role.Value
    elseif player.Backpack:FindFirstChild("Gun") or (player.Character and player.Character:FindFirstChild("Gun")) then
        return "Sheriff"
    elseif player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife")) then
        return "Murderer"
    else
        return "Innocent"
    end
end

local function GetESPColor(player)
    local role = GetRole(player)
    if role == "Lobby" then
        return RoleColors.Lobby -- –ë–µ–ª—ã–π —Ü–≤–µ—Ç –≤ –ª–æ–±–±–∏
    else
        return RoleColors[role] or Color3.fromRGB(255, 255, 255)
    end
end

local function UpdatePlayerList()
    PlayerList = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LP then
            table.insert(PlayerList, player.Name)
        end
    end
end

Players.PlayerAdded:Connect(UpdatePlayerList)
Players.PlayerRemoving:Connect(UpdatePlayerList)
UpdatePlayerList()

-----------------------------------------------------------
-- == ESP –∏ –≤–∏–∑—É–∞–ª ==
-----------------------------------------------------------
local function DrawESP(player)
    if ESPObjects[player] then return end
    ESPObjects[player] = {
        Box = Drawing.new("Square"),
        Name = Drawing.new("Text"),
        Tracer = Drawing.new("Line"),
        HealthBar = Drawing.new("Line"),
        Distance = Drawing.new("Text"),
    }
    ESPObjects[player].Box.Thickness = 2
    ESPObjects[player].Box.Filled = false
    ESPObjects[player].Box.Visible = false

    ESPObjects[player].Name.Size = 18
    ESPObjects[player].Name.Center = true
    ESPObjects[player].Name.Outline = true
    ESPObjects[player].Name.Visible = false

    ESPObjects[player].Tracer.Thickness = 2
    ESPObjects[player].Tracer.Visible = false

    ESPObjects[player].HealthBar.Thickness = 3
    ESPObjects[player].HealthBar.Visible = false

    ESPObjects[player].Distance.Size = 16
    ESPObjects[player].Distance.Center = true
    ESPObjects[player].Distance.Outline = true
    ESPObjects[player].Distance.Visible = false
end

local function RemoveESP(player)
    if ESPObjects[player] then
        for _, obj in pairs(ESPObjects[player]) do obj:Remove() end
        ESPObjects[player] = nil
    end
end

RunService.RenderStepped:Connect(function()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LP and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            DrawESP(player)
            local hrp = player.Character.HumanoidRootPart
            local head = player.Character:FindFirstChild("Head")
            local pos, onscreen = Camera:WorldToViewportPoint(hrp.Position)
            local color = GetESPColor(player) -- –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ü–≤–µ—Ç–∞
            local esp = ESPObjects[player]

            -- Box
            if BoxEnabled and onscreen then
                local size = Vector2.new(40, 80)
                esp.Box.Position = Vector2.new(pos.X - size.X/2, pos.Y - size.Y/2)
                esp.Box.Size = size
                esp.Box.Color = color
                esp.Box.Visible = ESPEnabled
            else esp.Box.Visible = false end

            -- Name
            if NameEnabled and head and onscreen then
                local role = GetRole(player)
                local displayName = role == "Lobby" and player.Name .. " [–õ–æ–±–±–∏]" or player.Name .. " ["..role.."]"
                esp.Name.Text = displayName
                esp.Name.Position = Vector2.new(pos.X, pos.Y - 50)
                esp.Name.Color = color
                esp.Name.Visible = ESPEnabled
            else esp.Name.Visible = false end

            -- Tracer
            if TracerEnabled and onscreen then
                esp.Tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
                esp.Tracer.To = Vector2.new(pos.X, pos.Y)
                esp.Tracer.Color = color
                esp.Tracer.Visible = ESPEnabled
            else esp.Tracer.Visible = false end

            -- HealthBar
            if HealthBarEnabled and player.Character:FindFirstChild("Humanoid") and onscreen then
                local hp = player.Character.Humanoid.Health / player.Character.Humanoid.MaxHealth
                esp.HealthBar.From = Vector2.new(pos.X - 25, pos.Y + 40)
                esp.HealthBar.To = Vector2.new(pos.X - 25, pos.Y + 40 - 60 * hp)
                esp.HealthBar.Color = Color3.fromRGB(0, 255, 0)
                esp.HealthBar.Visible = ESPEnabled
            else esp.HealthBar.Visible = false end

            -- Distance
            if DistanceEnabled and onscreen and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
                local dist = math.floor((LP.Character.HumanoidRootPart.Position - hrp.Position).Magnitude)
                esp.Distance.Text = tostring(dist).."m"
                esp.Distance.Position = Vector2.new(pos.X, pos.Y + 45)
                esp.Distance.Color = color
                esp.Distance.Visible = ESPEnabled
            else esp.Distance.Visible = false end
        else
            RemoveESP(player)
        end
    end
end)

Players.PlayerRemoving:Connect(RemoveESP)
Players.PlayerAdded:Connect(function(p) 
    p.CharacterAdded:Connect(function() 
        wait(1)
        DrawESP(p) 
    end) 
end)

-----------------------------------------------------------
-- == GunESP / CoinESP / CandyESP ==
-----------------------------------------------------------
RunService.RenderStepped:Connect(function()
    -- Gun ESP
    if GunESPEnabled then
        for _, obj in pairs(workspace:GetChildren()) do
            if obj.Name == "GunDrop" then
                if not obj:FindFirstChild("EclipseGunESP") then
                    local hl = Instance.new("Highlight")
                    hl.Name = "EclipseGunESP"
                    hl.Parent = obj
                    hl.FillColor = RoleColors.Gun
                    hl.OutlineColor = Color3.new(0,0,0)
                    hl.FillTransparency = 0.2
                    hl.OutlineTransparency = 0.1
                end
            end
        end
    else
        for _, obj in pairs(workspace:GetChildren()) do
            if obj:FindFirstChild("EclipseGunESP") then
                obj.EclipseGunESP:Destroy()
            end
        end
    end
    
    -- Coin ESP
    if CoinESPEnabled then
        for _, obj in pairs(workspace:GetChildren()) do
            if obj.Name == "Coin" or obj.Name == "CoinDrop" then
                if not obj:FindFirstChild("EclipseCoinESP") then
                    local hl = Instance.new("Highlight")
                    hl.Name = "EclipseCoinESP"
                    hl.Parent = obj
                    hl.FillColor = RoleColors.Coin
                    hl.OutlineColor = Color3.new(0,0,0)
                    hl.FillTransparency = 0.2
                    hl.OutlineTransparency = 0.1
                end
            end
        end
    else
        for _, obj in pairs(workspace:GetChildren()) do
            if obj:FindFirstChild("EclipseCoinESP") then
                obj.EclipseCoinESP:Destroy()
            end
        end
    end
    
    -- Candy ESP
    if CandyESPEnabled then
        for _, obj in pairs(workspace:GetChildren()) do
            if string.lower(obj.Name) == "candy" or string.lower(obj.Name):find("candy") then
                if not obj:FindFirstChild("EclipseCandyESP") then
                    local hl = Instance.new("Highlight")
                    hl.Name = "EclipseCandyESP"
                    hl.Parent = obj
                    hl.FillColor = RoleColors.Candy
                    hl.OutlineColor = Color3.new(0,0,0)
                    hl.FillTransparency = 0.2
                    hl.OutlineTransparency = 0.1
                end
            end
        end
    else
        for _, obj in pairs(workspace:GetChildren()) do
            if obj:FindFirstChild("EclipseCandyESP") then
                obj.EclipseCandyESP:Destroy()
            end
        end
    end
end)

-----------------------------------------------------------
-- == –ê–≤—Ç–æ-—Ñ–∞—Ä–º –∫–æ–Ω—Ñ–µ—Ç ==
-----------------------------------------------------------
local function StartCandyFarm()
    AutoCandyActive = true
    spawn(function()
        while AutoCandyActive and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") do
            local candies = {}
            
            -- –ò—â–µ–º –≤—Å–µ –∫–æ–Ω—Ñ–µ—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–µ
            for _, obj in pairs(workspace:GetChildren()) do
                if string.lower(obj.Name) == "candy" or string.lower(obj.Name):find("candy") then
                    table.insert(candies, obj)
                end
            end
            
            if #candies > 0 then
                -- –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–µ—Ç—ã –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
                table.sort(candies, function(a, b)
                    local posA = a.Position
                    local posB = b.Position
                    local hrp = LP.Character.HumanoidRootPart.Position
                    return (posA - hrp).Magnitude < (posB - hrp).Magnitude
                end)
                
                -- –ë–µ—Ä–µ–º –±–ª–∏–∂–∞–π—à—É—é –∫–æ–Ω—Ñ–µ—Ç—É
                local candy = candies[1]
                local hrp = LP.Character.HumanoidRootPart
                
                if candy and hrp then
                    -- –ü–ª–∞–≤–Ω–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º—Å—è –∫ –∫–æ–Ω—Ñ–µ—Ç–µ
                    hrp.CFrame = CFrame.new(candy.Position + Vector3.new(0, 3, 0))
                    
                    -- –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
                    wait(0.3)
                    
                    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥–æ–±—Ä–∞–ª–∏ –ª–∏ –º—ã –∫–æ–Ω—Ñ–µ—Ç—É
                    if not candy.Parent then
                        wait(0.5) -- –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ–¥–±–æ—Ä–∞
                    end
                end
            else
                -- –ï—Å–ª–∏ –∫–æ–Ω—Ñ–µ—Ç –Ω–µ—Ç, –∂–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ
                wait(1)
            end
            
            -- –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∞–≥–æ–≤
            wait(0.1)
        end
    end)
end

local function StopCandyFarm()
    AutoCandyActive = false
end

-----------------------------------------------------------
-- == –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–≤—Ç–æ-—Ñ–∞—Ä–º –º–æ–Ω–µ—Ç ==
-----------------------------------------------------------
local function StartAutoFarm()
    AutoFarmActive = true
    spawn(function()
        while AutoFarmActive and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") do
            local coins = {}
            for _, obj in pairs(workspace:GetChildren()) do
                if obj.Name == "Coin" or obj.Name == "CoinDrop" then
                    table.insert(coins, obj)
                end
            end
            
            if #coins > 0 then
                -- –°–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–Ω–µ—Ç—ã –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
                table.sort(coins, function(a, b)
                    local posA = a.Position
                    local posB = b.Position
                    local hrp = LP.Character.HumanoidRootPart.Position
                    return (posA - hrp).Magnitude < (posB - hrp).Magnitude
                end)
                
                local coin = coins[1]
                local hrp = LP.Character.HumanoidRootPart
                if hrp and coin then
                    hrp.CFrame = CFrame.new(coin.Position + Vector3.new(0, 3, 0))
                    wait(0.3)
                end
            else
                wait(0.5)
            end
            wait(0.1)
        end
    end)
end

local function StopAutoFarm() 
    AutoFarmActive = false 
end

-----------------------------------------------------------
-- == GUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ==
-----------------------------------------------------------
local VisualTab = Window:CreateTab("üëÅÔ∏è –í–∏–∑—É–∞–ª", 1234567890)
VisualTab:CreateToggle({Name="üì¶ ESP Box",CurrentValue=true,Flag="ESPBox",Callback=function(v) BoxEnabled=v end})
VisualTab:CreateToggle({Name="üë§ ESP Name",CurrentValue=true,Flag="ESPName",Callback=function(v) NameEnabled=v end})
VisualTab:CreateToggle({Name="üìà ESP Distance",CurrentValue=false,Flag="ESPDistance",Callback=function(v) DistanceEnabled=v end})
VisualTab:CreateToggle({Name="üü© ESP HealthBar",CurrentValue=false,Flag="ESPHealthBar",Callback=function(v) HealthBarEnabled=v end})
VisualTab:CreateToggle({Name="üìç ESP Tracers",CurrentValue=false,Flag="ESPTracer",Callback=function(v) TracerEnabled=v end})
VisualTab:CreateToggle({Name="üî´ GunESP",CurrentValue=false,Flag="GunESP",Callback=function(v) GunESPEnabled=v end})
VisualTab:CreateToggle({Name="ü™ô CoinESP",CurrentValue=false,Flag="CoinESP",Callback=function(v) CoinESPEnabled=v end})
VisualTab:CreateToggle({Name="üç¨ CandyESP",CurrentValue=false,Flag="CandyESP",Callback=function(v) CandyESPEnabled=v end})
VisualTab:CreateToggle({Name="üåà –í–∫–ª—é—á–∏—Ç—å –≤–µ—Å—å ESP",CurrentValue=true,Flag="ESPEnabled",Callback=function(v) ESPEnabled=v end})

local AutoTab = Window:CreateTab("‚ö° –ê–≤—Ç–æ", 1234567891)
AutoTab:CreateToggle({Name="üí∞ –ê–≤—Ç–æ-–§–∞—Ä–º –ú–æ–Ω–µ—Ç",CurrentValue=false,Flag="AutoFarm",Callback=function(v) if v then StartAutoFarm() else StopAutoFarm() end end})
AutoTab:CreateToggle({Name="üç¨ –ê–≤—Ç–æ-–§–∞—Ä–º –ö–æ–Ω—Ñ–µ—Ç",CurrentValue=false,Flag="AutoCandy",Callback=function(v) if v then StartCandyFarm() else StopCandyFarm() end end})
AutoTab:CreateToggle({Name="üî´ –ê–≤—Ç–æ-–í–∑—è—Ç—å –ü—É—à–∫—É",CurrentValue=false,Flag="AutoGun",Callback=function(v) if v then TeleportToGun() end end})
AutoTab:CreateToggle({Name="üèÉ –ê–≤—Ç–æ-–£–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —É–±–∏–π—Ü—ã",CurrentValue=false,Flag="AvoidMurderer",Callback=function(v) ToggleAvoidMurderer(v) end})

-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...

Rayfield:Notify({
    Title = "Eclipse X Hub ULTIMATE v1.1",
    Content = "–£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π —á–∏—Ç MM2 2025 –∑–∞–ø—É—â–µ–Ω!\n‚úÖ –ê–≤—Ç–æ-—Ñ–∞—Ä–º –∫–æ–Ω—Ñ–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω\n‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ ESP —Å —Ü–≤–µ—Ç–∞–º–∏ –ø–æ —Ä–æ–ª—è–º\nEnjoy!",
    Duration = 9,
    Image = 4483362458,
})

-----------------------------------------------------------
-- == –ö–æ–Ω–µ—Ü ==
-----------------------------------------------------------
