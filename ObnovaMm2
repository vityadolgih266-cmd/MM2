-- 🎮 NEO X HUB | MM2 ULTIMATE
-- ✨ Created by AI Assistant | Premium Cheat Menu

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- 🎪 Главное окно
local Window = Rayfield:CreateWindow({
   Name = "🎮 NEO X HUB | MM2 ULTIMATE",
   LoadingTitle = "Neo X Hub загружается...",
   LoadingSubtitle = "Премиум чит-мод от AI Assistant",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "NeoXHub",
      FileName = "NeoConfig"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvite",
      RememberJoins = true
   },
   KeySystem = false
})

-- 🎯 Основные сервисы
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LP = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- ⚙️ Настройки Neo X Hub
local Neo = {
   ESP = {
      Enabled = true,
      Box = true,
      Name = true,
      Health = true,
      Distance = true,
      Tracer = false,
      Role = true,
      Weapon = true,
      Chams = false
   },
   Visuals = {
      GunESP = true,
      CoinESP = true,
      Crosshair = false,
      FullBright = false,
      Time = true
   },
   Movement = {
      Fly = false,
      Speed = false,
      Noclip = false,
      InfJump = false,
      SpeedValue = 30
   },
   Combat = {
      Aimbot = false,
      SilentAim = false,
      TriggerBot = false,
      FOV = 50
   },
   Automation = {
      AutoFarm = false,
      AvoidMurderer = false,
      AutoGun = false,
      AutoCoin = false
   },
   Utility = {
      AntiAFK = true,
      RoundTimer = true,
      ServerHop = false,
      Rejoin = false
   }
}

-- 🎨 Цветовая схема Neo
local Colors = {
   Murderer = Color3.fromRGB(255, 50, 50),
   Sheriff = Color3.fromRGB(0, 150, 255),
   Innocent = Color3.fromRGB(50, 255, 50),
   Gun = Color3.fromRGB(255, 215, 0),
   Coin = Color3.fromRGB(255, 175, 0),
   Text = Color3.fromRGB(255, 255, 255)
}

-- ⏰ Система таймера
local Round = {
   StartTime = tick(),
   Duration = 300
}

local function GetRoundTime()
   if not Neo.Utility.RoundTimer then return "" end
   local elapsed = tick() - Round.StartTime
   local remaining = math.max(0, Round.Duration - elapsed)
   local minutes = math.floor(remaining / 60)
   local seconds = math.floor(remaining % 60)
   return string.format("⏰ %02d:%02d", minutes, seconds)
end

-- 🛡️ Анти-АФК система
local function AntiAFK()
   if not Neo.Utility.AntiAFK then return end
   
   local VirtualInput = game:GetService("VirtualInputManager")
   
   coroutine.wrap(function()
       while Neo.Utility.AntiAFK do
           wait(60)
           VirtualInput:SendKeyEvent(true, "W", false, game)
           wait(0.1)
           VirtualInput:SendKeyEvent(false, "W", false, game)
       end
   end)()
end

-- 🔥 ESP система
local ESP = {}
local function CreateESP(player)
   if ESP[player] then return end
   
   ESP[player] = {
       Box = Drawing.new("Square"),
       Name = Drawing.new("Text"),
       HealthBar = Drawing.new("Line"),
       HealthText = Drawing.new("Text"),
       DistanceText = Drawing.new("Text"),
       RoleText = Drawing.new("Text"),
       Tracer = Drawing.new("Line")
   }
   
   local e = ESP[player]
   e.Box.Thickness = 2
   e.Box.Filled = false
   
   e.Name.Size = 14
   e.Name.Center = true
   e.Name.Outline = true
   
   e.HealthBar.Thickness = 3
   
   e.HealthText.Size = 12
   e.HealthText.Center = true
   e.HealthText.Outline = true
   
   e.DistanceText.Size = 12
   e.DistanceText.Center = true
   e.DistanceText.Outline = true
   
   e.RoleText.Size = 13
   e.RoleText.Center = true
   e.RoleText.Outline = true
   
   e.Tracer.Thickness = 1
end

local function GetRole(player)
   if not player.Character then return "Innocent" end
   
   local char = player.Character
   local backpack = player.Backpack
   
   if char:FindFirstChild("Knife") or (backpack and backpack:FindFirstChild("Knife")) then
       return "Murderer"
   elseif char:FindFirstChild("Gun") or (backpack and backpack:FindFirstChild("Gun")) then
       return "Sheriff"
   end
   
   return "Innocent"
end

-- 🔄 Обновление ESP
local function UpdateESP()
   for player, e in pairs(ESP) do
       if not player or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
           for _, d in pairs(e) do d.Visible = false end
           continue
       end
       
       local char = player.Character
       local hrp = char.HumanoidRootPart
       local humanoid = char:FindFirstChild("Humanoid")
       
       if not humanoid then continue end
       
       local pos, onScreen = Camera:WorldToViewportPoint(hrp.Position)
       if not onScreen then
           for _, d in pairs(e) do d.Visible = false end
           continue
       end
       
       local role = GetRole(player)
       local color = Colors[role] or Colors.Innocent
       local dist = math.floor((LP.Character.HumanoidRootPart.Position - hrp.Position).Magnitude)
       local health = humanoid.Health
       local maxHealth = humanoid.MaxHealth
       local healthPct = health / maxHealth
       
       -- Box
       if Neo.ESP.Box then
           e.Box.Size = Vector2.new(35, 60)
           e.Box.Position = Vector2.new(pos.X - 17, pos.Y - 30)
           e.Box.Color = color
           e.Box.Visible = Neo.ESP.Enabled
       else e.Box.Visible = false end
       
       -- Name
       if Neo.ESP.Name then
           e.Name.Text = player.Name
           e.Name.Position = Vector2.new(pos.X, pos.Y - 45)
           e.Name.Color = color
           e.Name.Visible = Neo.ESP.Enabled
       else e.Name.Visible = false end
       
       -- Role
       if Neo.ESP.Role then
           e.RoleText.Text = "["..role.."]"
           e.RoleText.Position = Vector2.new(pos.X, pos.Y - 60)
           e.RoleText.Color = color
           e.RoleText.Visible = Neo.ESP.Enabled
       else e.RoleText.Visible = false end
       
       -- Health
       if Neo.ESP.Health then
           local barLen = 40
           local healthLen = barLen * healthPct
           
           e.HealthBar.From = Vector2.new(pos.X - 20, pos.Y + 35)
           e.HealthBar.To = Vector2.new(pos.X - 20 + healthLen, pos.Y + 35)
           e.HealthBar.Color = Color3.fromRGB(255 - (255 * healthPct), 255 * healthPct, 0)
           e.HealthBar.Visible = Neo.ESP.Enabled
           
           e.HealthText.Text = math.floor(health).."HP"
           e.HealthText.Position = Vector2.new(pos.X, pos.Y + 30)
           e.HealthText.Color = color
           e.HealthText.Visible = Neo.ESP.Enabled
       else
           e.HealthBar.Visible = false
           e.HealthText.Visible = false
       end
       
       -- Distance
       if Neo.ESP.Distance then
           e.DistanceText.Text = dist.."m"
           e.DistanceText.Position = Vector2.new(pos.X, pos.Y + 55)
           e.DistanceText.Color = color
           e.DistanceText.Visible = Neo.ESP.Enabled
       else e.DistanceText.Visible = false end
       
       -- Tracer
       if Neo.ESP.Tracer then
           e.Tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
           e.Tracer.To = Vector2.new(pos.X, pos.Y)
           e.Tracer.Color = color
           e.Tracer.Visible = Neo.ESP.Enabled
       else e.Tracer.Visible = false end
   end
end

-- 🚀 Функции движения
local function Fly()
   if not Neo.Movement.Fly then 
       if LP.Character and LP.Character.HumanoidRootPart:FindFirstChild("NeoFly") then
           LP.Character.HumanoidRootPart.NeoFly:Destroy()
       end
       return 
   end
   
   local bv = Instance.new("BodyVelocity")
   bv.Name = "NeoFly"
   bv.Velocity = Vector3.new(0, 50, 0)
   bv.MaxForce = Vector3.new(0, 9e9, 0)
   bv.Parent = LP.Character.HumanoidRootPart
end

local function Speed()
   if LP.Character and LP.Character:FindFirstChild("Humanoid") then
       LP.Character.Humanoid.WalkSpeed = Neo.Movement.Speed and Neo.Movement.SpeedValue or 16
   end
end

local function Noclip()
   if Neo.Movement.Noclip and LP.Character then
       for _, part in pairs(LP.Character:GetDescendants()) do
           if part:IsA("BasePart") then
               part.CanCollide = false
           end
       end
   end
end

-- ⚡ Авто-фарм
local function AutoFarm()
   if not Neo.Automation.AutoFarm then return end
   
   local coins = {}
   for _, obj in pairs(workspace:GetDescendants()) do
       if obj.Name == "Coin" or obj.Name == "CoinDrop" then
           table.insert(coins, obj)
       end
   end
   
   if #coins > 0 then
       local closest = coins[1]
       local closestDist = (LP.Character.HumanoidRootPart.Position - closest.Position).Magnitude
       
       for i = 2, #coins do
           local dist = (LP.Character.HumanoidRootPart.Position - coins[i].Position).Magnitude
           if dist < closestDist then
               closest = coins[i]
               closestDist = dist
           end
       end
       
       LP.Character.HumanoidRootPart.CFrame = closest.CFrame + Vector3.new(0, 3, 0)
   end
end

-- 🎮 ИНТЕРФЕЙС NEO X HUB

-- 👁️ ВКЛАДКА ВИЗУАЛ
local VisualTab = Window:CreateTab("👁️ ВИЗУАЛ", 1234567890)
VisualTab:CreateToggle({Name = "🌈 ВКЛЮЧИТЬ ESP", CurrentValue = true, Flag = "ESP_Master", Callback = function(v) 
   Neo.ESP.Enabled = v 
end})

VisualTab:CreateSection("📊 ESP НАСТРОЙКИ")
VisualTab:CreateToggle({Name = "📦 BOX ESP", CurrentValue = true, Flag = "ESP_Box", Callback = function(v) Neo.ESP.Box = v end})
VisualTab:CreateToggle({Name = "👤 NAME ESP", CurrentValue = true, Flag = "ESP_Name", Callback = function(v) Neo.ESP.Name = v end})
VisualTab:CreateToggle({Name = "🎯 ROLE ESP", CurrentValue = true, Flag = "ESP_Role", Callback = function(v) Neo.ESP.Role = v end})
VisualTab:CreateToggle({Name = "❤️ HEALTH BAR", CurrentValue = true, Flag = "ESP_Health", Callback = function(v) Neo.ESP.Health = v end})
VisualTab:CreateToggle({Name = "📏 DISTANCE", CurrentValue = true, Flag = "ESP_Distance", Callback = function(v) Neo.ESP.Distance = v end})
VisualTab:CreateToggle({Name = "📍 TRACER", CurrentValue = false, Flag = "ESP_Tracer", Callback = function(v) Neo.ESP.Tracer = v end})

VisualTab:CreateSection("🎨 ВИЗУАЛЬНЫЕ ЭФФЕКТЫ")
VisualTab:CreateToggle({Name = "🔫 GUN ESP", CurrentValue = true, Flag = "GunESP", Callback = function(v) 
   Neo.Visuals.GunESP = v 
   if v then
       for _, obj in pairs(workspace:GetDescendants()) do
           if obj.Name == "GunDrop" and not obj:FindFirstChild("NeoGunESP") then
               local hl = Instance.new("Highlight")
               hl.Name = "NeoGunESP"
               hl.FillColor = Colors.Gun
               hl.OutlineColor = Color3.new(1, 1, 0)
               hl.FillTransparency = 0.3
               hl.Parent = obj
           end
       end
   else
       for _, obj in pairs(workspace:GetDescendants()) do
           if obj:FindFirstChild("NeoGunESP") then
               obj.NeoGunESP:Destroy()
           end
       end
   end
end})

VisualTab:CreateToggle({Name = "🪙 COIN ESP", CurrentValue = true, Flag = "CoinESP", Callback = function(v) 
   Neo.Visuals.CoinESP = v 
   if v then
       for _, obj in pairs(workspace:GetDescendants()) do
           if (obj.Name == "Coin" or obj.Name == "CoinDrop") and not obj:FindFirstChild("NeoCoinESP") then
               local hl = Instance.new("Highlight")
               hl.Name = "NeoCoinESP"
               hl.FillColor = Colors.Coin
               hl.OutlineColor = Color3.new(1, 0.5, 0)
               hl.FillTransparency = 0.3
               hl.Parent = obj
           end
       end
   else
       for _, obj in pairs(workspace:GetDescendants()) do
           if obj:FindFirstChild("NeoCoinESP") then
               obj.NeoCoinESP:Destroy()
           end
       end
   end
end})

-- 🚀 ВКЛАДКА ДВИЖЕНИЕ
local MovementTab = Window:CreateTab("🚀 ДВИЖЕНИЕ", 1234567891)
MovementTab:CreateToggle({Name = "🦅 ПОЛЕТ", CurrentValue = false, Flag = "Fly", Callback = function(v) 
   Neo.Movement.Fly = v 
   Fly()
end})

MovementTab:CreateToggle({Name = "💨 СКОРОСТЬ", CurrentValue = false, Flag = "Speed", Callback = function(v) 
   Neo.Movement.Speed = v 
   Speed()
end})

MovementTab:CreateSlider({Name = "🚀 СКОРОСТЬ ХОДЬБЫ", Range = {16, 100}, Increment = 1, Suffix = "studs", CurrentValue = 30, Flag = "SpeedValue", Callback = function(v) 
   Neo.Movement.SpeedValue = v 
   Speed()
end})

MovementTab:CreateToggle({Name = "👻 NOCLIP", CurrentValue = false, Flag = "Noclip", Callback = function(v) 
   Neo.Movement.Noclip = v 
end})

MovementTab:CreateToggle({Name = "🦘 БЕСКОНЕЧНЫЙ ПРЫЖОК", CurrentValue = false, Flag = "InfJump", Callback = function(v) 
   Neo.Movement.InfJump = v 
   if v then
       UserInputService.JumpRequest:connect(function()
           if Neo.Movement.InfJump then
               LP.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
           end
       end)
   end
end})

-- ⚡ ВКЛАДКА АВТОМАТИЗАЦИЯ
local AutoTab = Window:CreateTab("⚡ АВТОМАТИЗАЦИЯ", 1234567892)
AutoTab:CreateToggle({Name = "💰 АВТО-ФАРМ МОНЕТ", CurrentValue = false, Flag = "AutoFarm", Callback = function(v) 
   Neo.Automation.AutoFarm = v 
end})

AutoTab:CreateToggle({Name = "🏃 АВТО-УКЛОНЕНИЕ ОТ УБИЙЦЫ", CurrentValue = false, Flag = "AvoidMurderer", Callback = function(v) 
   Neo.Automation.AvoidMurderer = v 
end})

AutoTab:CreateToggle({Name = "🔫 АВТО-ПОДБОР ПУШКИ", CurrentValue = false, Flag = "AutoGun", Callback = function(v) 
   Neo.Automation.AutoGun = v 
   if v then
       for _, obj in pairs(workspace:GetDescendants()) do
           if obj.Name == "GunDrop" then
               LP.Character.HumanoidRootPart.CFrame = obj.CFrame
               break
           end
       end
   end
end})

-- ⚙️ ВКЛАДКА УТИЛИТЫ
local UtilityTab = Window:CreateTab("⚙️ УТИЛИТЫ", 1234567893)
UtilityTab:CreateToggle({Name = "🛡️ АНТИ-АФК", CurrentValue = true, Flag = "AntiAFK", Callback = function(v) 
   Neo.Utility.AntiAFK = v 
   if v then AntiAFK() end
end})

UtilityTab:CreateToggle({Name = "⏰ ТАЙМЕР РАУНДА", CurrentValue = true, Flag = "RoundTimer", Callback = function(v) 
   Neo.Utility.RoundTimer = v 
end})

UtilityTab:CreateButton({Name = "🔃 ПЕРЕЗАЙТИ НА СЕРВЕР", Callback = function()
   game:GetService("TeleportService"):Teleport(game.PlaceId)
end})

UtilityTab:CreateButton({Name = "🎯 ТЕЛЕПОРТ К ПУШКЕ", Callback = function()
   for _, obj in pairs(workspace:GetDescendants()) do
       if obj.Name == "GunDrop" then
           LP.Character.HumanoidRootPart.CFrame = obj.CFrame + Vector3.new(0, 3, 0)
           break
       end
   end
end})

UtilityTab:CreateButton({Name = "🪙 ТЕЛЕПОРТ К МОНЕТЕ", Callback = function()
   for _, obj in pairs(workspace:GetDescendants()) do
       if obj.Name == "Coin" or obj.Name == "CoinDrop" then
           LP.Character.HumanoidRootPart.CFrame = obj.CFrame + Vector3.new(0, 3, 0)
           break
       end
   end
end})

-- 🎮 ТЕЛЕПОРТ К ИГРОКАМ
local playerList = {}
for _, player in pairs(Players:GetPlayers()) do
   if player ~= LP then table.insert(playerList, player.Name) end
end

UtilityTab:CreateDropdown({Name = "🎯 ТЕЛЕПОРТ К ИГРОКУ", Options = playerList, CurrentOption = "", Flag = "TPPlayer", Callback = function(selected)
   local target = Players:FindFirstChild(selected)
   if target and target.Character then
       LP.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
   end
end})

-- 🔧 ВКЛАДКА НАСТРОЙКИ
local SettingsTab = Window:CreateTab("🔧 НАСТРОЙКИ", 1234567894)
SettingsTab:CreateButton({Name = "🔄 ОБНОВИТЬ ИНТЕРФЕЙС", Callback = function()
   Rayfield:Notify({
       Title = "Обновление",
       Content = "Интерфейс обновлен!",
       Duration = 3
   })
end})

SettingsTab:CreateButton({Name = "🗑️ УДАЛИТЬ ИНТЕРФЕЙС", Callback = function()
   Rayfield:Destroy()
   for _, esp in pairs(ESP) do
       for _, drawing in pairs(esp) do
           drawing:Remove()
       end
   end
end})

SettingsTab:CreateLabel("Создано AI Assistant")
SettingsTab:CreateLabel("Neo X Hub v1.0")

-- 🔔 УВЕДОМЛЕНИЕ О ЗАПУСКЕ
Rayfield:Notify({
   Title = "🎮 NEO X HUB ЗАПУЩЕН",
   Content = "Добро пожаловать в Neo X Hub!\nСоздано AI Assistant",
   Duration = 6,
   Image = 4483362458
})

-- 🔄 ОСНОВНОЙ ЦИКЛ
RunService.Heartbeat:Connect(function()
   -- ESP
   UpdateESP()
   
   -- Движение
   Fly()
   Speed()
   Noclip()
   
   -- Автоматизация
   if Neo.Automation.AutoFarm then
       AutoFarm()
   end
   
   -- Уклонение от убийцы
   if Neo.Automation.AvoidMurderer then
       for _, player in pairs(Players:GetPlayers()) do
           if player ~= LP and GetRole(player) == "Murderer" and player.Character then
               local dist = (LP.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
               if dist < 20 then
                   local dir = (LP.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Unit
                   LP.Character.HumanoidRootPart.CFrame = LP.Character.HumanoidRootPart.CFrame + dir * 25
               end
           end
       end
   end
end)

-- 🎯 ИНИЦИАЛИЗАЦИЯ ESP
for _, player in pairs(Players:GetPlayers()) do
   if player ~= LP then CreateESP(player) end
end

Players.PlayerAdded:Connect(function(player)
   player.CharacterAdded:Connect(function()
       wait(1)
       CreateESP(player)
   end)
end)

Players.PlayerRemoving:Connect(function(player)
   if ESP[player] then
       for _, drawing in pairs(ESP[player]) do
           drawing:Remove()
       end
       ESP[player] = nil
   end
end)

-- 🛡️ ЗАПУСК АНТИ-АФК
AntiAFK()

print("🎮 Neo X Hub успешно загружен!")
print("✨ Создано AI Assistant")
