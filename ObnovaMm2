-- ULTIMATE DEATH BALL CHEAT v2 - FIXED AUTO PARRY & ESP
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "üî• DEATH BALL ULTIMATE CHEAT v2",
   LoadingTitle = "Loading ENHANCED HACKS...",
   LoadingSubtitle = "by PROFESSIONAL CHEATER",
   ConfigurationSaving = {Enabled = true, FolderName = "DeathBallHack", FileName = "UltimateConfig"}
})

getgenv().UltimateCheat = {
    AutoFarm = false, AutoParry = false, AutoSpam = false, BallESP = false, PlayerESP = false,
    SpeedHack = false, WalkSpeed = 100, InfiniteJump = false, NoClip = false, AutoClaimQuest = false,
    AutoAbility = false, AutoWalk = false, ParryDistance = 15, PingCompensation = 0.05, GodMode = false
}

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

-- –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –º—è—á–µ–π
local function getBallsUltimate()
    local balls = {}
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and (string.find(obj.Name:lower(), "ball") or obj.Shape == Enum.PartType.Ball) then
            table.insert(balls, obj)
        end
    end
    return balls
end

-- FIXED AUTO PARRY - –£–õ–¨–¢–†–ê –ê–ì–†–ï–°–°–ò–í–ù–´–ô
local lastParryTime = 0
local parryCooldown = 0.2

spawn(function()
    RunService.Heartbeat:Connect(function()
        if getgenv().UltimateCheat.AutoParry and character and root then
            local balls = getBallsUltimate()
            
            for _, ball in ipairs(balls) do
                if ball and ball.Parent and ball.AssemblyLinearVelocity then
                    local ballPos = ball.Position
                    local rootPos = root.Position
                    local distance = (ballPos - rootPos).Magnitude
                    local ballVel = ball.AssemblyLinearVelocity
                    
                    -- –ü–†–û–°–¢–û–ô –ò –ê–ì–†–ï–°–°–ò–í–ù–´–ô –ü–ê–†–ò–†–û–í–©–ò–ö
                    local isBallMoving = ballVel.Magnitude > 5
                    local isClose = distance < getgenv().UltimateCheat.ParryDistance
                    local isApproaching = ballVel:Dot((rootPos - ballPos).Unit) > 0
                    
                    -- –£–°–ò–õ–ï–ù–ù–´–ï –£–°–õ–û–í–ò–Ø –î–õ–Ø –ê–í–¢–û–ü–ê–†–ò–†–û–í–ê–ù–ò–Ø
                    if isBallMoving and isClose and isApproaching and tick() - lastParryTime > parryCooldown then
                        
                        -- –°–ü–ê–ú –ü–ê–†–ò–†–û–í–ê–ù–ò–ï–ú –ù–ê –í–°–ï –°–õ–£–ß–ê–ò
                        for i = 1, 3 do  -- –ú—É–ª—å—Ç–∏-–ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
                            -- –ü—Ä–æ–±—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
                            
                            -- 1. –ß–µ—Ä–µ–∑ RemoteEvent
                            local remotes = ReplicatedStorage:GetDescendants()
                            for _, remote in ipairs(remotes) do
                                if remote:IsA("RemoteEvent") and (
                                    string.find(remote.Name:lower(), "parry") or
                                    string.find(remote.Name:lower(), "block") or
                                    string.find(remote.Name:lower(), "deflect") or
                                    string.find(remote.Name:lower(), "counter")
                                ) then
                                    pcall(function() remote:FireServer() end)
                                end
                            end
                            
                            -- 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
                            for _, tool in ipairs(character:GetChildren()) do
                                if tool:IsA("Tool") then
                                    pcall(function() tool:Activate() end)
                                    task.wait(0.01)
                                    pcall(function() tool:Deactivate() end)
                                end
                            end
                            
                            -- 3. –°–ø–∞–º –∫–ª–∞–≤–∏—à–µ–π (—ç–º—É–ª—è—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è)
                            pcall(function() 
                                virtualInput = game:GetService("VirtualInputManager")
                                virtualInput:SendKeyEvent(true, Enum.KeyCode.E, false, game)
                                task.wait(0.01)
                                virtualInput:SendKeyEvent(false, Enum.KeyCode.E, false, game)
                            end)
                            
                            task.wait(0.05)
                        end
                        
                        lastParryTime = tick()
                        break
                    end
                end
            end
        end
    end)
end)

-- –£–õ–£–ß–®–ï–ù–ù–´–ô BALL ESP –° –í–ò–ó–£–ê–õ–¨–ù–´–ú–ò –≠–§–§–ï–ö–¢–ê–ú–ò
local ballHighlights = {}
local ballTrails = {}

spawn(function()
    RunService.Heartbeat:Connect(function()
        -- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
        for ball, objects in pairs(ballHighlights) do
            if not ball or not ball.Parent then
                if objects.highlight then objects.highlight:Destroy() end
                if objects.billboard then objects.billboard:Destroy() end
                if objects.beam then objects.beam:Destroy() end
                ballHighlights[ball] = nil
            end
        end
        
        if getgenv().UltimateCheat.BallESP then
            local balls = getBallsUltimate()
            
            for _, ball in ipairs(balls) do
                if ball and ball.Parent then
                    if not ballHighlights[ball] then
                        -- –°–æ–∑–¥–∞–µ–º –≤—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                        local highlight = Instance.new("Highlight")
                        highlight.Adornee = ball
                        highlight.FillColor = Color3.fromRGB(255, 0, 0)  -- –ö—Ä–∞—Å–Ω—ã–π
                        highlight.OutlineColor = Color3.fromRGB(255, 255, 0) -- –ñ–µ–ª—Ç–∞—è –æ–±–≤–æ–¥–∫–∞
                        highlight.FillTransparency = 0.2  -- –ú–µ–Ω—å—à–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
                        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                        highlight.Parent = workspace
                        
                        -- –ë–∏–ª–ª–±–æ—Ä–¥ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
                        local billboard = Instance.new("BillboardGui")
                        billboard.Adornee = ball
                        billboard.Size = UDim2.new(0, 120, 0, 50)
                        billboard.StudsOffset = Vector3.new(0, 4, 0)
                        billboard.AlwaysOnTop = true
                        billboard.MaxDistance = 500
                        
                        local label = Instance.new("TextLabel")
                        label.Size = UDim2.new(1, 0, 1, 0)
                        label.BackgroundTransparency = 1
                        label.Text = "üéØ BALL\n" .. math.floor((ball.Position - root.Position).Magnitude) .. " studs"
                        label.TextColor3 = Color3.new(1, 1, 0)
                        label.TextStrokeColor3 = Color3.new(0, 0, 0)
                        label.TextStrokeTransparency = 0
                        label.TextScaled = true
                        label.Font = Enum.Font.GothamBold
                        label.Parent = billboard
                        billboard.Parent = ball
                        
                        -- –õ—É—á –∫ –º—è—á—É
                        local beam = Instance.new("Beam")
                        beam.Attachment0 = Instance.new("Attachment")
                        beam.Attachment0.Parent = root
                        beam.Attachment1 = Instance.new("Attachment")
                        beam.Attachment1.Parent = ball
                        beam.Color = ColorSequence.new(Color3.fromRGB(255, 0, 0))
                        beam.Width0 = 0.5
                        beam.Width1 = 0.5
                        beam.FaceCamera = true
                        beam.Parent = workspace
                        
                        ballHighlights[ball] = {
                            highlight = highlight,
                            billboard = billboard,
                            beam = beam
                        }
                    else
                        -- –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
                        if ballHighlights[ball].billboard then
                            local label = ballHighlights[ball].billboard:FindFirstChildWhichIsA("TextLabel")
                            if label then
                                label.Text = "üéØ BALL\n" .. math.floor((ball.Position - root.Position).Magnitude) .. " studs"
                                
                                -- –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                                local dist = (ball.Position - root.Position).Magnitude
                                if dist < 10 then
                                    label.TextColor3 = Color3.new(1, 0, 0)  -- –ö—Ä–∞—Å–Ω—ã–π (–±–ª–∏–∑–∫–æ)
                                    if ballHighlights[ball].highlight then
                                        ballHighlights[ball].highlight.FillColor = Color3.fromRGB(255, 0, 0)
                                    end
                                elseif dist < 25 then
                                    label.TextColor3 = Color3.new(1, 1, 0)  -- –ñ–µ–ª—Ç—ã–π (—Å—Ä–µ–¥–Ω–µ)
                                    if ballHighlights[ball].highlight then
                                        ballHighlights[ball].highlight.FillColor = Color3.fromRGB(255, 255, 0)
                                    end
                                else
                                    label.TextColor3 = Color3.new(0, 1, 0)  -- –ó–µ–ª–µ–Ω—ã–π (–¥–∞–ª–µ–∫–æ)
                                    if ballHighlights[ball].highlight then
                                        ballHighlights[ball].highlight.FillColor = Color3.fromRGB(0, 255, 0)
                                    end
                                end
                            end
                        end
                    end
                end
            end
        else
            -- –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
            for ball, objects in pairs(ballHighlights) do
                if objects.highlight then objects.highlight:Destroy() end
                if objects.billboard then objects.billboard:Destroy() end
                if objects.beam then objects.beam:Destroy() end
            end
            ballHighlights = {}
        end
    end)
end)

-- –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ (Auto Farm, Speed Hack, etc.) –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –∂–µ...

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
local MainTab = Window:CreateTab("MAIN HACKS", nil)
local VisualTab = Window:CreateTab("VISUALS", nil)

MainTab:CreateToggle({
    Name = "üõ°Ô∏è ULTRA AUTO PARRY (FIXED)",
    CurrentValue = false,
    Flag = "AutoParryUltra",
    Callback = function(Value)
        getgenv().UltimateCheat.AutoParry = Value
    end,
})

MainTab:CreateSlider({
    Name = "PARRY DISTANCE",
    Range = {5, 30},
    Increment = 1,
    Suffix = "Studs",
    CurrentValue = 15,
    Flag = "ParryDistance",
    Callback = function(Value)
        getgenv().UltimateCheat.ParryDistance = Value
    end,
})

VisualTab:CreateToggle({
    Name = "üéØ ENHANCED BALL ESP",
    CurrentValue = false,
    Flag = "BallESPEnhanced",
    Callback = function(Value)
        getgenv().UltimateCheat.BallESP = Value
    end,
})

VisualTab:CreateToggle({
    Name = "üëÅÔ∏è PLAYER ESP",
    CurrentValue = false,
    Flag = "PlayerESP",
    Callback = function(Value)
        getgenv().UltimateCheat.PlayerESP = Value
    end,
})

Rayfield:Notify({
    Title = "üî• ENHANCED CHEAT LOADED",
    Content = "AUTO PARRY FIXED! BALL ESP ENHANCED!",
    Duration = 6,
})

print("üéÆ ENHANCED DEATH BALL CHEAT ACTIVATED - AUTO PARRY FIXED!")
